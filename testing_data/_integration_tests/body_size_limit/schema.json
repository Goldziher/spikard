{
	"$schema": "http://json-schema.org/draft-07/schema#",
	"title": "Body Size Limit Test Fixture",
	"description": "Test fixture for body size limit middleware scenarios (413 Payload Too Large responses)",
	"type": "object",
	"required": ["name", "description", "category", "handler", "request", "expected_response"],
	"properties": {
		"name": {
			"type": "string",
			"description": "Human-readable name for this test case"
		},
		"description": {
			"type": "string",
			"description": "What this test validates"
		},
		"category": {
			"type": "string",
			"enum": ["body_size_limit"],
			"description": "Test category"
		},
		"handler": {
			"type": "object",
			"description": "Handler configuration including middleware",
			"required": ["route", "method"],
			"properties": {
				"route": {
					"type": "string",
					"description": "Route path"
				},
				"method": {
					"type": "string",
					"enum": ["GET", "POST", "PUT", "PATCH", "DELETE"],
					"description": "HTTP method"
				},
				"middleware": {
					"type": "object",
					"description": "Middleware configuration",
					"properties": {
						"body_size_limit": {
							"type": "object",
							"description": "Body size limit middleware configuration",
							"properties": {
								"max_body_size_bytes": {
									"type": "integer",
									"description": "Maximum allowed request body size in bytes",
									"minimum": 0
								},
								"per_route_limits": {
									"type": "object",
									"description": "Per-route size limit overrides",
									"additionalProperties": {
										"type": "integer",
										"minimum": 0
									}
								}
							}
						}
					}
				}
			}
		},
		"request": {
			"type": "object",
			"description": "HTTP request details",
			"required": ["method", "path"],
			"properties": {
				"method": {
					"type": "string",
					"enum": ["GET", "POST", "PUT", "PATCH", "DELETE", "HEAD", "OPTIONS"]
				},
				"path": {
					"type": "string",
					"description": "Request path"
				},
				"headers": {
					"type": "object",
					"description": "Request headers including Content-Type and Content-Length",
					"additionalProperties": {
						"type": "string"
					}
				},
				"body": {
					"type": "object",
					"description": "Request body details",
					"properties": {
						"simulated_size_bytes": {
							"type": "integer",
							"description": "Simulated size of the request body in bytes"
						},
						"content": {
							"description": "Actual body content (for success cases)"
						}
					}
				}
			}
		},
		"expected_response": {
			"type": "object",
			"description": "Expected HTTP response",
			"required": ["status_code"],
			"properties": {
				"status_code": {
					"type": "integer",
					"description": "HTTP status code (413 for payload too large, 200 for success)",
					"enum": [200, 413]
				},
				"body": {
					"type": "object",
					"description": "Response body (RFC 9457 problem details for 413, success payload for 200)",
					"properties": {
						"type": {
							"type": "string",
							"description": "URI reference identifying the problem type (RFC 9457)"
						},
						"title": {
							"type": "string",
							"description": "Short, human-readable summary (RFC 9457)"
						},
						"status": {
							"type": "integer",
							"description": "HTTP status code (RFC 9457)"
						},
						"detail": {
							"type": "string",
							"description": "Human-readable explanation specific to this occurrence (RFC 9457)"
						},
						"message": {
							"type": "string",
							"description": "Success message (for 200 responses)"
						},
						"bytes_received": {
							"type": "integer",
							"description": "Number of bytes received (for 200 responses)"
						}
					}
				},
				"headers": {
					"type": "object",
					"description": "Expected response headers",
					"additionalProperties": {
						"type": "string"
					}
				}
			}
		},
		"tags": {
			"type": "array",
			"description": "Test tags for categorization",
			"items": {
				"type": "string"
			}
		},
		"notes": {
			"type": "string",
			"description": "Additional notes or context"
		}
	}
}
