[package]
name = "spikard-node"
version.workspace = true
edition.workspace = true
authors.workspace = true
license.workspace = true
repository.workspace = true
homepage.workspace = true
description = "High-performance Node.js bindings for Spikard HTTP framework via napi-rs"
keywords = ["nodejs", "napi", "http", "framework", "typescript"]
categories = ["api-bindings", "web-programming::http-server"]
documentation = "https://docs.rs/spikard-node"
readme = "README.md"

[lib]
crate-type = ["cdylib"]

[lints]
workspace = true

[features]
default = ["di"]
di = ["spikard/di", "spikard-http/di"]
graphql = ["spikard-graphql"]
grpc = []

[dependencies]
spikard.workspace = true
spikard-http = { path = "../spikard-http", features = ["di"] }
spikard-core = { path = "../spikard-core" }
spikard-bindings-shared = { path = "../spikard-bindings-shared" }
spikard-graphql = { path = "../spikard-graphql", optional = true }
napi = { version = "3.8", default-features = false, features = ["napi8", "async", "serde-json"] }
napi-derive = "3.5"
tokio = { workspace = true }
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
async-trait = "0.1"
axum = { workspace = true }
axum-test = "18"
tower = "0.5"
bytes = "1.11"
url = "2.5"
http = { workspace = true }
http-body-util = "0.1"
cookie = "0.18"
serde_qs = "0.15"
rustc-hash = "2.1"
urlencoding = "2.1"
tracing.workspace = true
async-stream = "0.3"
once_cell = "1.21"
tonic = { version = "0.14", features = ["transport", "codegen", "gzip"] }

[target.'cfg(all(any(windows, unix), target_arch = "x86_64", not(target_env = "musl")))'.dependencies]
mimalloc-rust = "0.2"

[build-dependencies]
napi-build = "2.3"
