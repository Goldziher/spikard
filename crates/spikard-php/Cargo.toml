[package]
name = "spikard-php"
version.workspace = true
edition.workspace = true
license.workspace = true
publish = false

[lib]
name = "spikard_php"
path = "src/lib.rs"
crate-type = ["cdylib", "rlib"]

[features]
default = []
extension-module = [
    "dep:ext-php-rs",
    "dep:spikard-http",
    "dep:axum",
    "dep:axum-test",
    "dep:urlencoding",
    "dep:bytes",
]

[dependencies]
spikard = { workspace = true }
spikard-core = { workspace = true }
spikard-http = { path = "../spikard-http", optional = true }
axum = { version = "0.7", optional = true }
axum-test = { version = "15", optional = true }
urlencoding = { version = "2.1", optional = true }
bytes = { version = "1", optional = true }
ext-php-rs = { version = "0.15.1", default-features = false, optional = true }
once_cell = "1.20"
serde_json = { version = "1", features = ["preserve_order"] }
anyhow = "1.0"
tokio = { version = "1", features = ["rt", "macros"] }
