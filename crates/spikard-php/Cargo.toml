[package]
name = "spikard-php"
version.workspace = true
edition.workspace = true
license.workspace = true
publish = false

[lib]
name = "spikard_php"
path = "src/lib.rs"
crate-type = ["cdylib", "rlib"]

[features]
default = []
extension-module = [
    "dep:ext-php-rs",
    "dep:spikard-http",
    "dep:axum",
    "dep:axum-test",
    "dep:urlencoding",
    "dep:bytes",
]

[dependencies]
spikard = { workspace = true, features = ["di"] }
spikard-core = { workspace = true, features = ["di"] }
spikard-http = { path = "../spikard-http", features = ["di"], optional = true }
axum = { version = "0.8", optional = true }
axum-test = { version = "18", optional = true }
urlencoding = { version = "2.1", optional = true }
bytes = { version = "1", optional = true }
ext-php-rs = { version = "0.15.1", features = ["runtime"], default-features = false, optional = true }
once_cell = "1.21"
serde_json = { version = "1", features = ["preserve_order"] }
serde = { version = "1", features = ["derive"] }
anyhow = "1.0"
tokio = { version = "1", features = ["rt", "rt-multi-thread", "macros", "sync"] }
parking_lot = "0.12"
tracing = "0.1"
hyper = "1"
http-body-util = "0.1"
url = "2"
async-stream = "0.3"
